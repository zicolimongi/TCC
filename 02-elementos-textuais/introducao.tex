\chapter{Introdução}\label{chap:introducao}
A necessidade de persistência de dados sempre esteve presente na computação. A medida que os sistemas evoluíram a complexidade da forma que os dados eram armazenados aumentou significativamente. Com isso, houve a necessidade da criação de um sistema computadorizado de manutenção de registros \cite{CJDate}, o banco de dados.

O modelo relacional foi um dos primeiros modelos que surgiram, sua estrutura são tabelas de duas dimensões com linhas e colunas. Os dados armazenados são tipados, podendo variar a quantidade de tipos de acordo com o banco utilizado. Para interagir com esse modelo é necessário realizar consultas com a linguagem \ac{SQL}. Alguns exemplos de banco de dados relacional são MySQL \footnote{Sítio oficial  \url{http://www.mysql.com}}, Oracle \footnote{Sítio oficial  \url{http://www.oracle.com/technetwork/oem/db-mgmt/db-mgmt-093445.html}} e PostgreSQL \footnote{Sítio oficial \url{http://www.postgresql.org/}}.

Durante anos, o banco de dados relacional tem sido considerado a melhor opção para os problemas de escalabilidade, porém surgiram novas soluções com novas alternativas de estruturas de dados, replicação simples, alta disponibilidade e novos métodos de consultas \cite{SDSW}. Essas opções são conhecidas como NoSQL ou banco de dados do modelo não-relacional

Existem diversos gêneros de banco de dados do modelo não-relacional, entre eles chave-valor, orientado a documento, orientado a coluna e orientado a nó. Com o surgimento dessas novas soluções, o questionamento sobre qual banco de dados é melhor para resolver certo tipo de problema, vem à tona. A partir disso, o conhecimento e compreensão sobre os bancos de dados em geral se torna necessário para realizar uma boa escolha.

Entendendo que cada banco se destaca em determinados tipos de problema, é nítido perceber que sistemas que trabalham com mais de um banco de dados podem oferecer um melhor desempenho, dando origem à persistência poliglota.

Este trabalho consiste na comparação de dois sistemas baseados em NoSQL. O primeiro utilizará apenas um banco de dados, que será do gênero orientado a documento. O segundo utilizará dois bancos de dados, sendo um do gênero orientado a documento e um outro banco do gênero chave-valor. O segundo sistema, por utilizar dois bancos de dados, caracteriza a persistência poliglota, que é alvo desse trabalho. Os bancos escolhidos para fazer esses sistemas foram o MongoDB e o \ac{Redis}. O autor escolheu esses bancos de dados por ter experiência na linguagem \textit{Ruby on Rails}, que oferece excelentes bibliotecas para esses bancos e por serem utilizados em diversas aplicações. O MongoDB está sendo utilizado em grandes empresas, como Cisco, eBay, Codeacademy, Microsoft, Craiglist, The Guardian e outras, conforme sítio oficial do MongoDB \footnote{\url{http://www.mongodb.com/customers}}. O \ac{Redis} está sendo utilizado no Twitter, Github, Craiglist e outros conforme referência do sítio oficial \footnote{\url{http://redis.io/topics/whos-using-redis}}.
O intuito desse trabalho é comparar desempenho do uso da persistência poliglota  com a persistência monoglota.

MongoDB é um banco de dados do gênero orientado a documento e foi desenhado para ser gigante. O próprio nome é uma derivação da palavra inglesa \textit{humongous} que significa gigantesco. O diferencial desse banco é a maneira que os registros são armazenados. Cada registro fica armazenado em um documento que é análogo à tupla do modelo relacional. O documento é composto por um identificador único e um conjunto de valores de tipos e estruturas aninhadas. Esse banco é bem flexível, pois não tem esquema pré-definido e permite valores multivalorados. Ao criar a arquitetura do sistema temos que identificar se as entidades criadas são expressivas como um documento \cite{SDSW}. Além disso, há soluções para tratar concorrência e foi desenhado para trabalhar em \textit{clusters}.A linguagem utilizada para fazer consulta no MongoDB é JavaScript. Nesse trabalho iremos utilizar o banco MongoDB nos dois sistemas que serão criados.

O segundo banco utilizado se chama \ac{Redis} do gênero chave-valor. Esse tipo de armazenamento é mais simples. Como o próprio nome indica, é armazenado um valor para determinada chave. O valor armazenado pode ter uma estrutura variável. Escolhemos esse banco, pois antes de efetivar as operações em disco, ele mantém os valores na memória primária. Dessa forma, o banco tem um ganho muito alto em desempenho, porém poderá ocorrer perda de dados, caso ocorra uma falha de hardware \cite{SDSW}. A forma de como estruturar esse banco é muito parecida com um tipo estruturado chamado \textit{hash} que são implementadas em algumas linguagens de computação, como Java e Ruby. Esse banco será utilizado no segundo sistema a ser desenvolvido.


\section{Motivação}
\label{sec:motivacao}
A persistência poliglota é uma alternativa para melhorar o desempenho de uma aplicação. Utilizando-a conseguimos adaptar cada tipo de problema a um gênero de banco de dados.

Exitem duas variáveis opostas no ambiente de persistência de dados, consistência e disponibilidade. Quanto mais consistente um dado, menos disponível ele será e quanto mais disponível um dado menos consistente ele estará \cite{NoSQL}. Em aplicações é comum termos um conjunto de dados que deve ser sempre consistente e um outro conjunto de dados que deve estar sempre disponível. Logo, para atender a esses conjuntos de dados podem ser utilizados dois bancos de dados, um que garante disponibilidade e outro que garante  consistência. Utilizando esse ambiente misto, é esperado que haja um ganho de desempenho.

Atualmente poucos trabalhos apresentam uma comparação entre sistemas que utilizam apenas um banco, sistema monoglota,  e sistemas que utilizam persistência poliglota.

Com esse trabalho pretendemos ilustrar as diferenças entre a persistência monoglota e poliglota, destacando as vantagens que a persistência poliglota pode oferecer. Fizemos a implementação dos dois sistemas e coletamos resultados preliminares. Esses resultados indicam que a persistência poliglota tem um melhor desempenho.

O trabalho está organizado em cinco capítulos, o próximo, \autoref{chap:fundamentacaoTeorica}, apresenta a fundamentação teórica necessária para fazer esse trabalho. O \autoref{chap:implementacao} explica os sistemas criados e a diferença de implementação entre eles. O \autoref{chap:resultados} apresenta os resultados preliminares que demonstraram um melhor desempenho da persistência poliglota e, por fim, \autoref{chap:conclusao} apresenta a conclusão do trabalho.





